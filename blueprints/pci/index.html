<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>PCI Blueprint - Basis Theory Guides</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>PCI Blueprint | Basis Theory Guides</title> <meta name="generator" content="Jekyll v4.2.2" /> <meta property="og:title" content="PCI Blueprint" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Explore step-by-step guides to use our APIs and SDKs." /> <meta property="og:description" content="Explore step-by-step guides to use our APIs and SDKs." /> <link rel="canonical" href="https://developers.basistheory.com/blueprints/pci/" /> <meta property="og:url" content="https://developers.basistheory.com/blueprints/pci/" /> <meta property="og:site_name" content="Basis Theory Guides" /> <meta property="og:image" content="https://cdn.basistheory.com/images/seo/guides-opengraph.png" /> <meta property="og:image:height" content="630" /> <meta property="og:image:width" content="1200" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary_large_image" /> <meta property="twitter:image" content="https://cdn.basistheory.com/images/seo/guides-opengraph.png" /> <meta property="twitter:title" content="PCI Blueprint" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Explore step-by-step guides to use our APIs and SDKs.","headline":"PCI Blueprint","image":{"width":1200,"height":630,"url":"https://cdn.basistheory.com/images/seo/guides-opengraph.png","@type":"imageObject"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://developers.basistheory.com/assets/images/logos-guides.svg"}},"url":"https://developers.basistheory.com/blueprints/pci/"}</script> <!-- End Jekyll SEO tag --> </head> <script defer data-api="https://analytics.basistheory.com/api/event" data-domain="developers.basistheory.com" src="https://cdn.basistheory.com/javascript/analytics.js"></script> <!-- Google Tag Manager --> <script>(function (w, d, s, l, i) { w[l] = w[l] || []; w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' }); var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f); })(window, document, 'script', 'dataLayer', 'GTM-M56229L');</script> <!-- End Google Tag Manager --> <!-- Iubenda --> <script type="text/javascript"> var _iub = _iub || []; _iub.csConfiguration = { "ccpaAcknowledgeOnLoad": true, "consentOnContinuedBrowsing": false, "countryDetection": true, "gdprAppliesGlobally": false, "lang": "en", "siteId": 2378844, "cookiePolicyId": 13137791, "callback": { "onPreferenceExpressedOrNotNeeded": function (preference) { dataLayer.push({ iubenda_ccpa_opted_out: _iub.cs.api.isCcpaOptedOut() }); if (!preference) { dataLayer.push({ event: "iubenda_preference_not_needed" }); } else { if (preference.consent === true) { dataLayer.push({ event: "iubenda_consent_given" }); } else if (preference.consent === false) { dataLayer.push({ event: "iubenda_consent_rejected" }); } else if (preference.purposes) { for (var purposeId in preference.purposes) { if (preference.purposes[purposeId]) { dataLayer.push({ event: "iubenda_consent_given_purpose_" + purposeId }); } } } } } }, "banner": { "acceptButtonCaptionColor": "#070a1b", "acceptButtonColor": "#1ad1db", "acceptButtonDisplay": true, "backgroundColor": "#141729", "closeButtonDisplay": false, "customizeButtonCaptionColor": "#d2d2d2", "customizeButtonColor": "#1a1e32", "customizeButtonDisplay": true, "position": "bottom", "rejectButtonCaptionColor": "white", "rejectButtonColor": "#1e2337", "rejectButtonDisplay": true, "textColor": "#e5e6ec", "acceptButtonCaption": "Accept All", "content": "<link rel=\"preconnect\" href=\"https://fonts.googleapis.com\" />\n<link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossOrigin=\"true\" />\n<link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap\" rel=\"stylesheet\" />\n<style>\ndiv#iubenda-cs-banner {\n font-size: 16px !important;\n font-family: 'Inter', sans-serif, -apple-system, sans-serif !important;\n}\n\ndiv#iubenda-cs-banner div.iubenda-cs-container {\n border-top: 1px solid #2f3244 !important;\n}\n\ndiv#iubenda-cs-banner .iubenda-banner-content {\n font-family: 'Inter', sans-serif, -apple-system, sans-serif !important;\n font-weight: 400 !important;\n color: #8389a6 !important;\n font-size: 14px !important; \n}\n\ndiv#iubenda-cs-title {\n color: #E5E6EC !important;\n font-size: 16px !important;\n}\n\ndiv#iubenda-cs-banner div.iubenda-cs-opt-group button {\n padding: 12px 32px !important;\n font-weight: 600 !important;\n border-radius: 4px !important;\n}\n\nbutton.iubenda-cs-accept-btn {\n box-shadow: 1px 1px 3px 0 rgb(49 255 255 / 30%), inset 0 0 0 1px hsl(0deg 0% 100% / 40%);\n margin-left: 16px !important;\n}\n\n@media (min-width: 992px) {\n #iubenda-cs-banner.iubenda-cs-default div.iubenda-cs-rationale {\n max-width: 1200px !important;\n width: 100% !important;\n }\n}\n</style><div id=\"iubenda-cs-title\">&#x1f36a; &nbsp;Cookie Notice</div><div id=\"iubenda-cs-paragraph\">\n\nBy clicking \"Accept All\", you agree to the storing of cookies on your device to enhance site navigation, analyze site usage, and assist in our marketing efforts. View our <a href=\"https://basistheory.com/privacy-policy\" target=\"_blank\">Cookie Policy</a> for more information.\n</div>", "rejectButtonCaption": "" } }; </script> <script type="text/javascript" src="//cdn.iubenda.com/cs/iubenda_cs.js" charset="UTF-8" async></script> <!-- End Iubenda --> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path> <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle> <line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line> <line x1="3" y1="6" x2="21" y2="6"></line> <line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path> <polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <header class="site-header"> <a class="site-header-logo" href="https://developers.basistheory.com/"> </a> <div class="documentation-links"> <a class="documentation-link " href="/getting-started">Get Started</a> <a class="documentation-link active" href="/">Documentation</a> <a class="documentation-link" href="https://docs.basistheory.com/api-reference/#introduction">API Reference</a> <a class="documentation-link" href="https://docs.basistheory.com/elements/#introduction">Elements</a> </div> <div class="portal-links"> <a class="portal-sign-in" href="https://portal.basistheory.com">Sign In</a> <a class="portal-create-account" href="https://portal.basistheory.com/register">Create Account</a> </div> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"> <use xlink:href="#svg-menu"></use> </svg> </a> </header> <div class="side-bar"> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <div class="nav-list"><a class="side-bar-category home-link" href="/"> <div class="icon-and-category-name"> <div class="home-icon category-icon-spacing "></div> <div class="side-bar-category-name home-link ">Home</div> </div> </a> <div class="side-bar-category" id="getting-started-category-name-and-icon"> <div class="icon-and-category-name"> <div class="getting-started-icon category-icon-spacing "></div> <div class="side-bar-category-name ">Getting Started</div> </div> <a class="category-expander" id="getting-started-category-expander"></a> </div> <div class="side-bar-category-items" id="getting-started-category-items"><div class="nav-list-item"> <a href="https://developers.basistheory.com/getting-started/quickstart-with-curl/" class="nav-list-link ">Quickstart with cURL</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/getting-started/quickstart-with-nodejs/" class="nav-list-link ">Quickstart with Node.js</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/getting-started/quickstart-with-python/" class="nav-list-link ">Quickstart with Python</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/getting-started/quickstart-with-ruby/" class="nav-list-link ">Quickstart with Ruby</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/getting-started/quickstart-with-dotnet/" class="nav-list-link ">Quickstart with .NET</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/getting-started/quickstart-with-java/" class="nav-list-link ">Quickstart with Java</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/getting-started/quickstart-with-go/" class="nav-list-link ">Quickstart with Go</a> </div></div> <div class="side-bar-category" id="blueprints-category-name-and-icon"> <div class="icon-and-category-name"> <div class="blueprints-icon category-icon-spacing active"></div> <div class="side-bar-category-name active">Blueprints</div> </div> <a class="category-expander" id="blueprints-category-expander"></a> </div> <div class="side-bar-category-items" id="blueprints-category-items"><div class="nav-list-item active"> <a href="https://developers.basistheory.com/blueprints/pci/" class="nav-list-link active">PCI Blueprint</a> </div></div> <div class="side-bar-category" id="concepts-category-name-and-icon"> <div class="icon-and-category-name"> <div class="concepts-icon category-icon-spacing "></div> <div class="side-bar-category-name ">Concepts</div> </div> <a class="category-expander" id="concepts-category-expander"></a> </div> <div class="side-bar-category-items" id="concepts-category-items"><div class="nav-list-item"> <a href="https://developers.basistheory.com/concepts/what-are-tokens/" class="nav-list-link ">Tokens</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/concepts/what-are-token-containers/" class="nav-list-link ">Token Containers</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/concepts/access-controls/" class="nav-list-link ">Access Controls</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/concepts/what-is-the-proxy/" class="nav-list-link ">Proxy</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/concepts/what-are-reactors/" class="nav-list-link ">Reactors</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/concepts/what-is-search/" class="nav-list-link ">Search</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/concepts/what-are-mats/" class="nav-list-link ">Monthly Active Tokens</a> </div></div> <div class="side-bar-category" id="guides-category-name-and-icon"> <div class="icon-and-category-name"> <div class="guides-icon category-icon-spacing "></div> <div class="side-bar-category-name ">Guides</div> </div> <a class="category-expander" id="guides-category-expander"></a> </div> <div class="side-bar-category-items" id="guides-category-items"> <div class="guide-subcategory-title">SECURE YOUR DATA</div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/collect-pii-js/" class="nav-list-link ">Collect Customer Data (PII) with JavaScript</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/collect-pii-react/" class="nav-list-link ">Collect Customer Data (PII) with React</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/collect-cards-with-elements-react/" class="nav-list-link ">Collect Credit Cards with React</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/style-elements-for-my-brand/" class="nav-list-link ">Styling Elements</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/encrypt-us-banks-in-your-applications/" class="nav-list-link ">Encrypt U.S. Banks in your applications</a> </div><div class="guide-subcategory-title">USE YOUR DATA</div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/collect-cards-with-elements/" class="nav-list-link ">Collect and Charge Credit Cards with JavaScript</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/use-us-bank-accounts-without-touching-them/" class="nav-list-link ">Use U.S. Bank Accounts without touching them</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/reveal-cards-with-react/" class="nav-list-link ">Reveal Card Data with React</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/use-token-data-in-reactors/" class="nav-list-link ">Use Token Data in Reactors</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/use-token-data-in-http-requests/" class="nav-list-link ">Use Token Data in HTTP Requests</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/run-your-own-code-in-a-reactor/" class="nav-list-link ">Run Your Own Code in a Reactor</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/collect-cards-with-proxies/" class="nav-list-link ">Collect and Use Credit Cards with Proxies</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/migrating-off-basis-theory/" class="nav-list-link ">Migrating off Basis Theory</a> </div><div class="guide-subcategory-title">MANAGE YOUR DATA</div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/manage-applications-with-terraform/" class="nav-list-link ">Manage Applications with Terraform</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/manage-reactor-formulas-with-terraform/" class="nav-list-link ">Manage Reactor Formulas with Terraform</a> </div></div> <div class="side-bar-category" id="reference-category-name-and-icon"> <div class="icon-and-category-name"> <div class="reference-icon category-icon-spacing"></div> <div class="side-bar-category-name">Reference</div> </div> <a class="category-expander" id="reference-category-expander"></a> </div> <div class="side-bar-category-items" id="reference-category-items"> <div class="nav-list-item"> <a href="https://docs.basistheory.com/api-reference/#introduction" class="nav-list-link">API Reference</a> <a href="https://status.basistheory.com" target="_blank" class="nav-list-link">System Status</a> <a href="https://docs.basistheory.com/elements/#introduction" class="nav-list-link">Elements</a> <a href="https://docs.basistheory.com/expressions/#introduction" class="nav-list-link">Expressions</a> </div> </div> <a class="side-bar-category" href="/labs"> <div class="icon-and-category-name"> <div class="labs-icon category-icon-spacing "></div> <div class="side-bar-category-name ">Basis Theory Labs</div> </div> </a> </div> </nav> <footer class="site-footer"> </footer> </div> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Basis Theory Guides" aria-label="Search Basis Theory Guides" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"> <use xlink:href="#svg-search"></use> </svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main" id="top"> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="pci-blueprint">PCI Blueprint</h1> <p>Payment Card Industry Data Security Standard (PCI DSS) is a set of compliance requirements that must be met to collect, store, and process cardholder data. To fully implement these requirements is both costly and time intensive.</p> <p>The Basis Theory PCI Blueprint will provide you with a guide to meet <strong><em>95% of the compliance requirements</em></strong> of PCI in as little as <strong><em>5 minutes</em></strong>.</p> <p>This blueprint assumes you are using a <a href="https://reactjs.org/">React</a> frontend and <a href="https://nodejs.org/en/">Node.js</a> API. The blueprint can be modified for your specific framework or language by leveraging our <a href="https://docs.basistheory.com/elements/#initialize">Vanilla JS implementation</a> or one of our many language-specific SDKs.</p> <p><span class="base-alert info"> <span> Don’t want to complete this guide? View the completed example application <a href="https://github.com/Basis-Theory-Labs/pci-blueprint-example/">here</a>. </span> </span></p> <h3 class="no_toc text-delta" id="table-of-contents">Table of contents</h3> <ol id="markdown-toc"> <li><a href="#collect-credit-cards" id="markdown-toc-collect-credit-cards">Collect Credit Cards</a> <ol> <li><a href="#install-basis-theory-package" id="markdown-toc-install-basis-theory-package">Install Basis Theory Package</a></li> <li><a href="#create-a-public-application" id="markdown-toc-create-a-public-application">Create a Public Application</a></li> <li><a href="#initialize-basis-theory-elements" id="markdown-toc-initialize-basis-theory-elements">Initialize Basis Theory Elements</a></li> <li><a href="#add-card-element" id="markdown-toc-add-card-element">Add Card Element</a></li> </ol> </li> <li><a href="#store-cards" id="markdown-toc-store-cards">Store Cards</a> <ol> <li><a href="#tokenize-the-card" id="markdown-toc-tokenize-the-card">Tokenize the Card</a></li> <li><a href="#what-is-happening" id="markdown-toc-what-is-happening">What is Happening?</a></li> </ol> </li> <li><a href="#process-cards" id="markdown-toc-process-cards">Process Cards</a> <ol> <li><a href="#create-a-private-application" id="markdown-toc-create-a-private-application">Create a Private Application</a></li> <li><a href="#send-the-data-to-the-payment-service-provider" id="markdown-toc-send-the-data-to-the-payment-service-provider">Send the Data to the Payment Service Provider</a></li> <li><a href="#what-is-happening-1" id="markdown-toc-what-is-happening-1">What is Happening?</a></li> </ol> </li> <li><a href="#conclusion" id="markdown-toc-conclusion">Conclusion</a></li> </ol> <h2 id="collect-credit-cards">Collect Credit Cards</h2> <p>The first step to reducing your PCI scope is to securely collect cardholder information without your application touching the data. To do this, we will leverage <a href="https://docs.basistheory.com/elements/">Basis Theory Elements</a>. These secure form inputs for your web or mobile application collect sensitive cardholder data without directly interacting with the values.</p> <h3 id="install-basis-theory-package">Install Basis Theory Package</h3> <p>Install the Basis Theory React package within your application using your package manager:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> <span class="nt">--save</span> @basis-theory/basis-theory-react
<span class="c"># or</span>
yarn add @basis-theory/basis-theory-react
</code></pre></div></div> <h3 id="create-a-public-application">Create a Public Application</h3> <p>To securely collect cardholder data, you’ll need a <a href="https://docs.basistheory.com/api-reference/#applications">Public Application</a> using our PCI compliant template <code class="language-plaintext highlighter-rouge">Collect PCI Data</code>. <a href="https://portal.basistheory.com/applications/create?application_template_id=db9148c1-a55f-4164-b830-a20ab6d720ae">Click here to create one.</a></p> <p>This will create a PCI-compliant application with the following <a href="/concepts/access-controls/">Access Controls</a>:</p> <ul> <li>Permissions: <code class="language-plaintext highlighter-rouge">token:create</code>, <code class="language-plaintext highlighter-rouge">token:update</code></li> <li>Containers: <code class="language-plaintext highlighter-rouge">/pci/</code></li> <li>Transform: <code class="language-plaintext highlighter-rouge">mask</code></li> </ul> <p>Copy the API Key to be used in the next step.</p> <h3 id="initialize-basis-theory-elements">Initialize Basis Theory Elements</h3> <p>Let’s create a new Card Form component. In a terminal in the same directory as your <code class="language-plaintext highlighter-rouge">App</code> component, type:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">touch </span>card-form.js
</code></pre></div></div> <p>In your editor, update your App component with the following code, replacing <code class="language-plaintext highlighter-rouge">PUBLIC_API_KEY</code> with the API Key from the previous step:</p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> 
  <span class="nx">useBasisTheory</span><span class="p">,</span>
  <span class="nx">BasisTheoryProvider</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@basis-theory/basis-theory-react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CardForm</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./card-form</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">bt</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useBasisTheory</span><span class="p">(</span><span class="dl">'</span><span class="s1">PUBLIC_API_KEY</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">elements</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">BasisTheoryProvider</span> <span class="na">bt</span><span class="p">=</span><span class="si">{</span><span class="nx">bt</span><span class="si">}</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">CardForm</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">BasisTheoryProvider</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> <p>Next, add the following code to your new Card Form component:</p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> 
  <span class="nx">useBasisTheory</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@basis-theory/basis-theory-react</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">CardForm</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">bt</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useBasisTheory</span><span class="p">();</span>

  <span class="kd">const</span> <span class="nx">submit</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{};</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">form</span> <span class="na">onSubmit</span><span class="p">=</span><span class="si">{</span><span class="nx">submit</span><span class="si">}</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="p">=</span><span class="s">"button"</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="nx">submit</span><span class="si">}</span> <span class="p">&gt;</span>
        Submit
      <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> <p>This will initialize Basis Theory JS and add your new card form.</p> <h3 id="add-card-element">Add Card Element</h3> <p>Now, we need to add a <a href="https://docs.basistheory.com/elements/#element-types-card-element"><code class="language-plaintext highlighter-rouge">CardElement</code></a> component to our form. This Element type renders a single line containing input fields to capture the card number, expiration date, and CVC.</p> <p>Add the <code class="language-plaintext highlighter-rouge">CardElement</code> to our inputs:</p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> 
  <span class="nx">useBasisTheory</span><span class="p">,</span>
  <span class="nx">CardElement</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@basis-theory/basis-theory-react</span><span class="dl">'</span><span class="p">;</span>
</code></pre></div></div> <p>And inside of our <code class="language-plaintext highlighter-rouge">&lt;form&gt;</code> tag, add the following code:</p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="nc">CardElement</span> <span class="na">id</span><span class="p">=</span><span class="s">"card"</span> <span class="p">/&gt;</span>
</code></pre></div></div> <p>Your card component should now look like this:</p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> 
  <span class="nx">useBasisTheory</span><span class="p">,</span>
  <span class="nx">CardElement</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@basis-theory/basis-theory-react</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">CardForm</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">bt</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useBasisTheory</span><span class="p">();</span>

  <span class="kd">const</span> <span class="nx">submit</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{};</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">form</span> <span class="na">onSubmit</span><span class="p">=</span><span class="si">{</span><span class="nx">submit</span><span class="si">}</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">CardElement</span> <span class="na">id</span><span class="p">=</span><span class="s">"card"</span> <span class="p">/&gt;</span>

      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="p">=</span><span class="s">"button"</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="nx">submit</span><span class="si">}</span> <span class="p">&gt;</span>
        Submit
      <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> <p>You can fully customize the <a href="/guides/style-elements-for-my-brand">look and feel</a> to match your existing site and even listen to common <a href="https://docs.basistheory.com/elements/#element-events">events</a> on all Elements components.</p> <h2 id="store-cards">Store Cards</h2> <p>Now that we have securely captured the card information, we need to securely store the card.</p> <p>To do this, we will tokenize the data with Basis Theory. Basis Theory handles all of the secure encryption and storage of the cardholder data and returns a non-sensitive token identifier that can be stored in your database.</p> <h3 id="tokenize-the-card">Tokenize the Card</h3> <p>Inside of your <code class="language-plaintext highlighter-rouge">CardForm</code>, we will update the <code class="language-plaintext highlighter-rouge">submit</code> function to tokenize the card using the PCI-compliant <a href="https://docs.basistheory.com/#token-types-card"><code class="language-plaintext highlighter-rouge">card</code> Token Type</a>:</p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">submit</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Tokenize card with Basis Theory</span>
  <span class="kd">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">bt</span><span class="p">.</span><span class="nx">tokenize</span><span class="p">({</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">card</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">data</span><span class="p">:</span> <span class="nx">bt</span><span class="p">.</span><span class="nx">getElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">card</span><span class="dl">'</span><span class="p">),</span>
  <span class="p">});</span>

  <span class="c1">// Submit card token to our Next.js app's API</span>
  <span class="c1">// Example using Axios</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/api/cards</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">cardTokenId</span><span class="p">:</span> <span class="nx">token</span><span class="p">.</span><span class="nx">id</span> <span class="p">});</span>
<span class="p">};</span>
</code></pre></div></div> <h3 id="what-is-happening">What is Happening?</h3> <p>When a user submits their payment information, we will tokenize the underlying value of the <a href="https://docs.basistheory.com/elements/#cardelement">CardElement</a>. This will instruct Basis Theory Elements to submit this sensitive card data directly to <a href="https://docs.basistheory.com/#tokenize">Basis Theory’s Tokenize endpoint</a> and return the resulting token identifiers to our front end, all without our application having accessed the sensitive card data directly.</p> <p>We are also creating a <a href="https://docs.basistheory.com/#token-types-card"><code class="language-plaintext highlighter-rouge">card</code> Token Type</a>. This is a PCI-compliant token type that will validate the card number using the <a href="https://en.wikipedia.org/wiki/Luhn_algorithm">LUHN algorithm</a> and automatically expire the <code class="language-plaintext highlighter-rouge">cvc</code> property after one hour.</p> <p>The resulting token ID is safe to pass between your systems and store in plaintext within your preferred database.</p> <p>You can fully customize your card token, such as the alias, mask, and metadata by leveraging all of our <a href="/concepts/what-are-tokens">token capabilities</a> using <a href="https://docs.basistheory.com/expressions/">Expressions</a>.</p> <p><span class="base-alert warning"> <span> To not take on additional PCI scope, you cannot reveal more than the first six digits or last four digits of the card number via a combination of the alias and mask on your card token. </span> </span></p> <h2 id="process-cards">Process Cards</h2> <p>Now that we have our card token, we need to be able to send the cardholder data to a PCI-compliant payment service provider (PSP) such as Stripe or Braintree.</p> <p>In order to do this, we will send the data without touching the tokenized value. To accomplish this, we will use <a href="/concepts/what-is-the-proxy/">Basis Theory’s Proxy</a>.</p> <h3 id="create-a-private-application">Create a Private Application</h3> <p>First, you will need a <a href="https://docs.basistheory.com/api-reference/#applications">Private Application</a> using our PCI-compliant template <code class="language-plaintext highlighter-rouge">Use PCI Tokens</code>. This application will be used to securely send cardholder data via the Basis Theory Proxy to the PSP of your choice. <a href="https://portal.basistheory.com/applications/create?application_template_id=31efed55-035c-4b49-b1a1-609a728d91ce">Click here to create one.</a></p> <p>This will create a PCI-compliant application with the following <a href="/concepts/access-controls/">Access Controls</a>:</p> <ul> <li>Permissions: <code class="language-plaintext highlighter-rouge">token:use</code></li> <li>Containers: <code class="language-plaintext highlighter-rouge">/pci/</code></li> <li>Transform: <code class="language-plaintext highlighter-rouge">reveal</code></li> </ul> <p>Copy the API Key to be used in the next step.</p> <h3 id="send-the-data-to-the-payment-service-provider">Send the Data to the Payment Service Provider</h3> <p>From our backend API, we will now be able to send the cardholder data associated with our token to a third-party PSP.</p> <p>Add the following code to your API, replacing <code class="language-plaintext highlighter-rouge">PRIVATE_API_KEY</code> with the API Key from the previous step::</p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span> <span class="p">}</span>  <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span>
  <span class="dl">'</span><span class="s1">https://api.basistheory.com/proxy</span><span class="dl">'</span><span class="p">,</span> 
  <span class="p">{</span>
    <span class="na">card_number</span><span class="p">:</span> <span class="s2">`{{ </span><span class="p">${</span><span class="nx">cardTokenId</span><span class="p">}</span><span class="s2"> | json: '$.number' }}`</span><span class="p">,</span>
    <span class="na">exp_month</span><span class="p">:</span> <span class="s2">`{{ </span><span class="p">${</span><span class="nx">cardTokenId</span><span class="p">}</span><span class="s2"> | json: '$.expiration_month' | to_number }}`</span><span class="p">,</span>
    <span class="na">exp_year</span><span class="p">:</span> <span class="s2">`{{ </span><span class="p">${</span><span class="nx">cardTokenId</span><span class="p">}</span><span class="s2"> | json: '$.expiration_year' | to_number }}`</span><span class="p">,</span>
    <span class="na">cvc</span><span class="p">:</span> <span class="s2">`{{ </span><span class="p">${</span><span class="nx">cardTokenId</span><span class="p">}</span><span class="s2"> | json: '$.cvc' }}`</span>
  <span class="p">},</span> 
  <span class="p">{</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">'</span><span class="s1">BT-API-KEY</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">PRIVATE_API_KEY</span><span class="dl">'</span><span class="p">,</span>
      <span class="dl">'</span><span class="s1">BT-PROXY-URL</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://echo.basistheory.com/post</span><span class="dl">'</span><span class="p">,</span>
      <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span>
    <span class="p">}</span>
  <span class="p">});</span>
</code></pre></div></div> <p>You should see a JSON response similar to:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"card_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4242424242424242"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"exp_month"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
  </span><span class="nl">"exp_year"</span><span class="p">:</span><span class="w"> </span><span class="mi">2025</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cvc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <h3 id="what-is-happening-1">What is Happening?</h3> <p>A secure HTTPS request is made to Basis Theory’s Proxy endpoint. Basis Theory intercepts the request and detokenizes the <a href="https://docs.basistheory.com/expressions/">Expressions</a> in the request body.</p> <p>The detokenized request is then forwarded to the destination URL defined by the <code class="language-plaintext highlighter-rouge">BT-PROXY-URL</code> header passing request headers and query parameters along to the destination.</p> <p>This allows you to send the sensitive PCI cardholder data to any PCI-compliant third-party without touching the data and, therefore, keeping your systems out of PCI scope.</p> <p><span class="base-alert warning"> <span> You should ensure that any PCI cardholder data is only sent to PCI-certified third-parties. All PCI-certified services are required to maintain an up-to-date Attestation of Compliance (AOC) to accept and store cardholder information. </span> </span></p> <p>More advanced Proxy scenarios can be configured via the <a href="https://docs.basistheory.com/#proxies">Proxies endpoint</a>, such as tokenizing inbound cardholder data before it touches your API or encrypting outbound API calls with an encryption key.</p> <h2 id="conclusion">Conclusion</h2> <p>Following the PCI Blueprint enables you to remove 95% of the PCI compliance requirements by removing the need to touch the cardholder data when collecting, storing, and processing sensitive information.</p> <p>Have feedback or questions? Join us in our <a href="https://community.basistheory.com">Slack community</a>.</p> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
