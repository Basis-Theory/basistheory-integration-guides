<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Reveal Card Data with React - Basis Theory Guides</title> <meta name="Description" content="Basis Theory"> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Reveal Card Data with React | Basis Theory Guides</title> <meta name="generator" content="Jekyll v4.2.2" /> <meta property="og:title" content="Reveal Card Data with React" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Basis Theory" /> <meta property="og:description" content="Basis Theory" /> <link rel="canonical" href="https://developers.basistheory.com/guides/reveal-cards-with-react/" /> <meta property="og:url" content="https://developers.basistheory.com/guides/reveal-cards-with-react/" /> <meta property="og:site_name" content="Basis Theory Guides" /> <meta property="og:image" content="https://cdn.basistheory.com/images/seo/guides-opengraph.png" /> <meta property="og:image:height" content="630" /> <meta property="og:image:width" content="1200" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary_large_image" /> <meta property="twitter:image" content="https://cdn.basistheory.com/images/seo/guides-opengraph.png" /> <meta property="twitter:title" content="Reveal Card Data with React" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Basis Theory","headline":"Reveal Card Data with React","image":{"width":1200,"height":630,"url":"https://cdn.basistheory.com/images/seo/guides-opengraph.png","@type":"imageObject"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://developers.basistheory.com/assets/images/logos-guides.svg"}},"url":"https://developers.basistheory.com/guides/reveal-cards-with-react/"}</script> <!-- End Jekyll SEO tag --> </head> <script defer data-api="https://analytics.basistheory.com/api/event" data-domain="developers.basistheory.com" src="https://cdn.basistheory.com/javascript/analytics.js"></script> <!-- Google Tag Manager --> <script>(function (w, d, s, l, i) { w[l] = w[l] || []; w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' }); var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f); })(window, document, 'script', 'dataLayer', 'GTM-M56229L');</script> <!-- End Google Tag Manager --> <!-- Iubenda --> <script type="text/javascript"> var _iub = _iub || []; _iub.csConfiguration = { "ccpaAcknowledgeOnLoad": true, "consentOnContinuedBrowsing": false, "countryDetection": true, "gdprAppliesGlobally": false, "lang": "en", "siteId": 2378844, "cookiePolicyId": 13137791, "callback": { "onPreferenceExpressedOrNotNeeded": function (preference) { dataLayer.push({ iubenda_ccpa_opted_out: _iub.cs.api.isCcpaOptedOut() }); if (!preference) { dataLayer.push({ event: "iubenda_preference_not_needed" }); } else { if (preference.consent === true) { dataLayer.push({ event: "iubenda_consent_given" }); } else if (preference.consent === false) { dataLayer.push({ event: "iubenda_consent_rejected" }); } else if (preference.purposes) { for (var purposeId in preference.purposes) { if (preference.purposes[purposeId]) { dataLayer.push({ event: "iubenda_consent_given_purpose_" + purposeId }); } } } } } }, "banner": { "acceptButtonCaptionColor": "#070a1b", "acceptButtonColor": "#1ad1db", "acceptButtonDisplay": true, "backgroundColor": "#141729", "closeButtonDisplay": false, "customizeButtonCaptionColor": "#d2d2d2", "customizeButtonColor": "#1a1e32", "customizeButtonDisplay": true, "position": "bottom", "rejectButtonCaptionColor": "white", "rejectButtonColor": "#1e2337", "rejectButtonDisplay": true, "textColor": "#e5e6ec", "acceptButtonCaption": "Accept All", "content": "<link rel=\"preconnect\" href=\"https://fonts.googleapis.com\" />\n<link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossOrigin=\"true\" />\n<link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap\" rel=\"stylesheet\" />\n<style>\ndiv#iubenda-cs-banner {\n font-size: 16px !important;\n font-family: 'Inter', sans-serif, -apple-system, sans-serif !important;\n}\n\ndiv#iubenda-cs-banner div.iubenda-cs-container {\n border-top: 1px solid #2f3244 !important;\n}\n\ndiv#iubenda-cs-banner .iubenda-banner-content {\n font-family: 'Inter', sans-serif, -apple-system, sans-serif !important;\n font-weight: 400 !important;\n color: #8389a6 !important;\n font-size: 14px !important; \n}\n\ndiv#iubenda-cs-title {\n color: #E5E6EC !important;\n font-size: 16px !important;\n}\n\ndiv#iubenda-cs-banner div.iubenda-cs-opt-group button {\n padding: 12px 32px !important;\n font-weight: 600 !important;\n border-radius: 4px !important;\n}\n\nbutton.iubenda-cs-accept-btn {\n box-shadow: 1px 1px 3px 0 rgb(49 255 255 / 30%), inset 0 0 0 1px hsl(0deg 0% 100% / 40%);\n margin-left: 16px !important;\n}\n\n@media (min-width: 992px) {\n #iubenda-cs-banner.iubenda-cs-default div.iubenda-cs-rationale {\n max-width: 1200px !important;\n width: 100% !important;\n }\n}\n</style><div id=\"iubenda-cs-title\">&#x1f36a; &nbsp;Cookie Notice</div><div id=\"iubenda-cs-paragraph\">\n\nBy clicking \"Accept All\", you agree to the storing of cookies on your device to enhance site navigation, analyze site usage, and assist in our marketing efforts. View our <a href=\"https://basistheory.com/privacy-policy\" target=\"_blank\">Cookie Policy</a> for more information.\n</div>", "rejectButtonCaption": "" } }; </script> <script type="text/javascript" src="//cdn.iubenda.com/cs/iubenda_cs.js" charset="UTF-8" async></script> <!-- End Iubenda --> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path> <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle> <line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line> <line x1="3" y1="6" x2="21" y2="6"></line> <line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path> <polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <header class="site-header"> <a class="site-header-logo" href="https://developers.basistheory.com/"> </a> <div class="documentation-links"> <a class="documentation-link " href="/getting-started">Get Started</a> <a class="documentation-link active" href="/">Documentation</a> <a class="documentation-link" href="https://docs.basistheory.com/api-reference/#introduction">API Reference</a> <a class="documentation-link" href="https://docs.basistheory.com/elements/#introduction">Elements</a> </div> <div class="portal-links"> <a class="portal-sign-in" href="https://portal.basistheory.com">Sign In</a> <a class="portal-create-account" href="https://portal.basistheory.com/register">Create Account</a> </div> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"> <use xlink:href="#svg-menu"></use> </svg> </a> </header> <div class="side-bar"> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <div class="nav-list"><a class="side-bar-category home-link" href="/"> <div class="icon-and-category-name"> <div class="home-icon category-icon-spacing "></div> <div class="side-bar-category-name home-link ">Home</div> </div> </a> <div class="side-bar-category" id="getting-started-category-name-and-icon"> <div class="icon-and-category-name"> <div class="getting-started-icon category-icon-spacing "></div> <div class="side-bar-category-name ">Getting Started</div> </div> <a class="category-expander" id="getting-started-category-expander"></a> </div> <div class="side-bar-category-items" id="getting-started-category-items"><div class="nav-list-item"> <a href="https://developers.basistheory.com/getting-started/quickstart-with-curl/" class="nav-list-link ">Quickstart with cURL</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/getting-started/quickstart-with-nodejs/" class="nav-list-link ">Quickstart with Node.js</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/getting-started/quickstart-with-python/" class="nav-list-link ">Quickstart with Python</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/getting-started/quickstart-with-ruby/" class="nav-list-link ">Quickstart with Ruby</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/getting-started/quickstart-with-dotnet/" class="nav-list-link ">Quickstart with .NET</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/getting-started/quickstart-with-java/" class="nav-list-link ">Quickstart with Java</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/getting-started/quickstart-with-go/" class="nav-list-link ">Quickstart with Go</a> </div></div> <div class="side-bar-category" id="blueprints-category-name-and-icon"> <div class="icon-and-category-name"> <div class="blueprints-icon category-icon-spacing "></div> <div class="side-bar-category-name ">Blueprints</div> </div> <a class="category-expander" id="blueprints-category-expander"></a> </div> <div class="side-bar-category-items" id="blueprints-category-items"><div class="nav-list-item"> <a href="https://developers.basistheory.com/blueprints/pci/" class="nav-list-link ">PCI Blueprint</a> </div></div> <div class="side-bar-category" id="concepts-category-name-and-icon"> <div class="icon-and-category-name"> <div class="concepts-icon category-icon-spacing "></div> <div class="side-bar-category-name ">Concepts</div> </div> <a class="category-expander" id="concepts-category-expander"></a> </div> <div class="side-bar-category-items" id="concepts-category-items"><div class="nav-list-item"> <a href="https://developers.basistheory.com/concepts/what-are-tokens/" class="nav-list-link ">Tokens</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/concepts/what-are-token-containers/" class="nav-list-link ">Token Containers</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/concepts/access-controls/" class="nav-list-link ">Access Controls</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/concepts/what-is-the-proxy/" class="nav-list-link ">Proxy</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/concepts/what-are-reactors/" class="nav-list-link ">Reactors</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/concepts/what-is-search/" class="nav-list-link ">Search</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/concepts/what-are-mats/" class="nav-list-link ">Monthly Active Tokens</a> </div></div> <div class="side-bar-category" id="guides-category-name-and-icon"> <div class="icon-and-category-name"> <div class="guides-icon category-icon-spacing active"></div> <div class="side-bar-category-name active">Guides</div> </div> <a class="category-expander" id="guides-category-expander"></a> </div> <div class="side-bar-category-items" id="guides-category-items"> <div class="guide-subcategory-title">SECURE YOUR DATA</div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/collect-pii-js/" class="nav-list-link ">Collect Customer Data (PII) with JavaScript</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/collect-pii-react/" class="nav-list-link ">Collect Customer Data (PII) with React</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/collect-cards-with-elements-react/" class="nav-list-link ">Collect Credit Cards with React</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/style-elements-for-my-brand/" class="nav-list-link ">Styling Elements</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/encrypt-us-banks-in-your-applications/" class="nav-list-link ">Encrypt U.S. Banks in your applications</a> </div><div class="guide-subcategory-title">USE YOUR DATA</div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/collect-cards-with-elements/" class="nav-list-link ">Collect and Charge Credit Cards with JavaScript</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/use-us-bank-accounts-without-touching-them/" class="nav-list-link ">Use U.S. Bank Accounts without touching them</a> </div><div class="nav-list-item active"> <a href="https://developers.basistheory.com/guides/reveal-cards-with-react/" class="nav-list-link active">Reveal Card Data with React</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/use-token-data-in-reactors/" class="nav-list-link ">Use Token Data in Reactors</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/use-token-data-in-http-requests/" class="nav-list-link ">Use Token Data in HTTP Requests</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/run-your-own-code-in-a-reactor/" class="nav-list-link ">Run Your Own Code in a Reactor</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/collect-cards-with-proxies/" class="nav-list-link ">Collect and Use Credit Cards with Proxies</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/migrating-off-basis-theory/" class="nav-list-link ">Migrating off Basis Theory</a> </div><div class="guide-subcategory-title">MANAGE YOUR DATA</div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/manage-applications-with-terraform/" class="nav-list-link ">Manage Applications with Terraform</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/manage-reactor-formulas-with-terraform/" class="nav-list-link ">Manage Reactor Formulas with Terraform</a> </div></div> <div class="side-bar-category" id="reference-category-name-and-icon"> <div class="icon-and-category-name"> <div class="reference-icon category-icon-spacing"></div> <div class="side-bar-category-name">Reference</div> </div> <a class="category-expander" id="reference-category-expander"></a> </div> <div class="side-bar-category-items" id="reference-category-items"> <div class="nav-list-item"> <a href="https://docs.basistheory.com/api-reference/#introduction" class="nav-list-link">API Reference</a> <a href="https://status.basistheory.com" target="_blank" class="nav-list-link">System Status</a> <a href="https://docs.basistheory.com/elements/#introduction" class="nav-list-link">Elements</a> <a href="https://docs.basistheory.com/expressions/#introduction" class="nav-list-link">Expressions</a> </div> </div> <a class="side-bar-category" href="/labs"> <div class="icon-and-category-name"> <div class="labs-icon category-icon-spacing "></div> <div class="side-bar-category-name ">Basis Theory Labs</div> </div> </a> </div> </nav> <footer class="site-footer"> </footer> </div> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Basis Theory Guides" aria-label="Search Basis Theory Guides" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"> <use xlink:href="#svg-search"></use> </svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main" id="top"> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 id="reveal-card-data-with-react">Reveal Card Data with React</h1> <p>This guide shows how you can safely reveal tokenized data to your users, without ever touching the detokenized data directly, keeping your systems out of compliance scope.</p> <p>It’s assumed on this guide that you are already familiar with the Basis Theory platform, but if that is not the case, please take a look at our getting started <a href="https://developers.basistheory.com/getting-started">guides</a> before going further.</p> <h2 id="creating-an-expiring-application">Creating an Expiring Application</h2> <p>Basis Theory Elements can only retrieve token data by using an API key issued by an <a href="https://docs.basistheory.com/#applications-application-types">expiring</a> application. This restriction is in place because the API key may be publicly exposed by the browser network calls when retrieving token data within a web application. An <code class="language-plaintext highlighter-rouge">expiring</code> application has an expiration date, meaning that after a specified amount of time (up to 1 day), the application’s API key expires and can no longer be used. This mitigates the risk of publicly exposing this API key.</p> <p>The following steps outline how to create an <code class="language-plaintext highlighter-rouge">expiring</code> application:</p> <h3 id="enable-create-expiring-application-on-a-private-application">Enable “Create Expiring Application” on a Private Application</h3> <p>An <code class="language-plaintext highlighter-rouge">expiring</code> application can only be created by a <code class="language-plaintext highlighter-rouge">private</code> application, and not by a <code class="language-plaintext highlighter-rouge">management</code> application as is required for other application types. An <code class="language-plaintext highlighter-rouge">expiring</code> application can only be granted access to resources within the parent <code class="language-plaintext highlighter-rouge">private</code> application’s scope of access. In particular, this means that an <code class="language-plaintext highlighter-rouge">expiring</code> application cannot be granted access to tokens that are not accessible by the parent <code class="language-plaintext highlighter-rouge">private</code> application. In order for an <code class="language-plaintext highlighter-rouge">expiring</code> applications to be used to reveal token values, the issuing <code class="language-plaintext highlighter-rouge">private</code> application must either have the <code class="language-plaintext highlighter-rouge">token:read</code> <a href="https://developers.basistheory.com/concepts/access-controls/#permissions">permission</a> or an <a href="https://developers.basistheory.com/concepts/access-controls/#what-are-access-rules">access rule</a> that grants the <code class="language-plaintext highlighter-rouge">token:read</code> permission to a subset of tokens. To enable a <code class="language-plaintext highlighter-rouge">private</code> application to create expiring applications, simply set the toggle in the Customer Portal, either during the <code class="language-plaintext highlighter-rouge">private</code> application creation or when updating an existing one:</p> <p><img src="/assets/images/elements_reveal/enable_expiring_applications.png" alt="Image of Create Expiring Application toggle in the portal" /></p> <p>Additionally, you can also enable this through our <a href="https://docs.basistheory.com/#applications-create-application">API or SDKs</a> using the <code class="language-plaintext highlighter-rouge">can_create_expiring_applications</code> flag.</p> <p><span class="base-alert warning"> <span> Tokens of type <code>card</code> are automatically added to the <code>/pci/high/</code> container. Your <code>private</code> application requires <code>token:read</code> access to the <code>/pci/high/</code> container to continue with this tutorial. If you don’t have a private application yet that meets these criteria, you can <a href="https://portal.basistheory.com/applications/create?application_template_id=e6d4c554-6703-4bbb-b351-42cd2ee5cb5a">click here</a> to create one. </span> </span></p> <h3 id="create-the-expiring-application">Create The Expiring Application</h3> <p>Now that the <code class="language-plaintext highlighter-rouge">private</code> application has the ability to create <code class="language-plaintext highlighter-rouge">expiring</code> applications, you can use the <code class="language-plaintext highlighter-rouge">private</code> application API key to create expiring applications from your server-side code.</p> <p>The example below uses the Basis Theory JS SDK to accomplish this, but <a href="https://docs.basistheory.com/#applications-create-application">other</a> SDKs are available to better fit your workflow.</p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">BasisTheory</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@basis-theory/basis-theory-js</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">bt</span> <span class="o">=</span> <span class="k">await</span> <span class="k">new</span> <span class="nx">BasisTheory</span><span class="p">().</span><span class="nx">init</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;PRIVATE_APPLICATION_KEY&gt;</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">expiringApplication</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">bt</span><span class="p">.</span><span class="nx">applications</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">expiring</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">expires_at</span><span class="p">:</span> <span class="nx">ttl</span><span class="p">(),</span>
  <span class="na">rules</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="na">description</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Reveal Card</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">priority</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="na">transform</span><span class="p">:</span> <span class="dl">'</span><span class="s1">reveal</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// required for reveal</span>
      <span class="na">conditions</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="na">attribute</span><span class="p">:</span> <span class="dl">'</span><span class="s1">id</span><span class="dl">'</span><span class="p">,</span>
          <span class="na">operator</span><span class="p">:</span> <span class="dl">'</span><span class="s1">equals</span><span class="dl">'</span><span class="p">,</span>
          <span class="na">value</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">tokenId</span><span class="p">,</span> <span class="c1">// from the request made to the server-side code</span>
        <span class="p">},</span>
      <span class="p">],</span>
      <span class="na">permissions</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">token:read</span><span class="dl">'</span><span class="p">],</span> <span class="c1">// required for reveal</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">});</span>
</code></pre></div></div> <h2 id="using-expiring-application-keys-to-reveal-card-with-elements-react">Using Expiring Application Keys to Reveal Card with Elements React</h2> <p>Now that you are already creating <code class="language-plaintext highlighter-rouge">expiring</code> applications and fetching the keys with your client side code, those keys can be used to safely retrieve tokens and set their values onto Elements for users to see.</p> <h3 id="creating-a-cardelement-with-basis-theory-react">Creating a CardElement with Basis Theory React</h3> <p>For this example, we are going to be using the <a href="https://docs.basistheory.com/elements/#react-package">Basis Theory React</a> package to mount elements onto a React based frontend.</p> <p>The process of creating and mounting an Element is the same as <a href="https://developers.basistheory.com/guides/collect-cards-with-elements-react/">usual</a>. You still need a <code class="language-plaintext highlighter-rouge">public</code> application key for that.</p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useRef</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CardElement</span><span class="p">,</span> <span class="nx">useBasisTheory</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@basis-theory/basis-theory-react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CardElement</span> <span class="k">as</span> <span class="nx">ICardElement</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@basis-theory/basis-theory-js/types/elements</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">DisplayCard</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">bt</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useBasisTheory</span><span class="p">();</span>
  <span class="kd">const</span> <span class="nx">cardRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="o">&lt;</span><span class="nx">ICardElement</span><span class="o">&gt;</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">CardElement</span> <span class="na">id</span><span class="p">=</span><span class="s">"myCard"</span> <span class="na">ref</span><span class="p">=</span><span class="si">{</span><span class="nx">cardRef</span><span class="si">}</span><span class="p">/&gt;</span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div> <h3 id="using-the-expiring-application-key-to-retrieve-a-token-with-elements">Using the Expiring Application Key to Retrieve a Token with Elements</h3> <p>Assuming your client code is already fetching <code class="language-plaintext highlighter-rouge">expiring</code> application keys as per previous steps, these can then be used to retrieve a token value, granted that proper permissions are applied. Any attribute from the token like <code class="language-plaintext highlighter-rouge">metadata</code> can be directly accessible from the response, <strong>except</strong> for <code class="language-plaintext highlighter-rouge">data</code>, which represents just a reference to the actual data value that can be used with <code class="language-plaintext highlighter-rouge">setValue</code> in the next step.</p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">cardToken</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">bt</span><span class="p">.</span><span class="nx">tokens</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="nx">tokenId</span><span class="p">,</span> <span class="p">{</span> <span class="na">apiKey</span><span class="p">:</span> <span class="nx">expiringKey</span> <span class="p">});</span>
</code></pre></div></div> <h3 id="revealing-token-data-with-elements">Revealing Token Data with Elements</h3> <p>As said previously, the retrieved token <code class="language-plaintext highlighter-rouge">data</code> value does not contain the actual data but just a reference to it. The actual <code class="language-plaintext highlighter-rouge">data</code> is safely stored in a Basis Theory <code class="language-plaintext highlighter-rouge">iframe</code> and can be set as the value for an Element input internally using the <code class="language-plaintext highlighter-rouge">setValue</code> method:</p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">cardRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="nx">cardToken</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span>
</code></pre></div></div> <h3 id="putting-it-all-together">Putting it All Together</h3> <p>See the complete code we created in this tutorial below.</p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useRef</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CardElement</span><span class="p">,</span> <span class="nx">useBasisTheory</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@basis-theory/basis-theory-react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CardElement</span> <span class="k">as</span> <span class="nx">ICardElement</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@basis-theory/basis-theory-js/types/elements</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">DisplayCard</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">bt</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useBasisTheory</span><span class="p">();</span>
  <span class="kd">const</span> <span class="nx">cardRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="o">&lt;</span><span class="nx">ICardElement</span><span class="o">&gt;</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">revealCard</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="c1">// fetching the expiring application key from your server side code</span>
    <span class="kd">const</span> <span class="p">{</span>
      <span class="na">data</span><span class="p">:</span> <span class="p">{</span> <span class="nx">expiringKey</span> <span class="p">},</span>
    <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/api/authorize</span><span class="dl">'</span><span class="p">);</span>

    <span class="c1">// using the expiring application key to retrieve the token</span>
    <span class="kd">const</span> <span class="nx">cardToken</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">bt</span><span class="p">.</span><span class="nx">tokens</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="nx">tokenId</span><span class="p">,</span> <span class="p">{</span> <span class="na">apiKey</span><span class="p">:</span> <span class="nx">expiringKey</span> <span class="p">});</span>

    <span class="c1">// setting the token data value into the CardElement</span>
    <span class="nx">cardRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="nx">cardToken</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span> 
  <span class="p">}</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;&gt;</span>
      <span class="p">&lt;</span><span class="nc">CardElement</span> <span class="na">id</span><span class="p">=</span><span class="s">"myCard"</span> <span class="na">ref</span><span class="p">=</span><span class="si">{</span><span class="nx">cardRef</span><span class="si">}</span><span class="p">/&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="p">=</span><span class="s">"button"</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="nx">revealCard</span><span class="si">}</span><span class="p">&gt;</span>Reveal Card<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/&gt;</span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div> <p>That’s it, now the token data can be displayed to the user 🎉, and since your client-side application does not have direct access to the actual data value, it falls out of compliance scope.</p> <h2 id="demo-repository">Demo Repository</h2> <p>To better demonstrate this feature, we made available a <a href="https://github.com/Basis-Theory-Labs/display-card-example">demo repository</a> that you can clone and run on your local machine.</p> <p>This repository showcases some best practices and techniques for simplifying working with <a href="https://docs.basistheory.com/elements/#introduction">Elements</a>, including:</p> <ul> <li>Shows how to build a <code class="language-plaintext highlighter-rouge">CardElement</code> for collecting cards that will be subsequently revealed.</li> <li>Using the split <code class="language-plaintext highlighter-rouge">CardNumberElement</code>, <code class="language-plaintext highlighter-rouge">CardExpirationDateElement</code> and <code class="language-plaintext highlighter-rouge">CardVerificationCodeElement</code> to create a UI that resembles a credit card visually when revealing values.</li> <li>Uses the <code class="language-plaintext highlighter-rouge">NextJS</code> server side API to fetch <code class="language-plaintext highlighter-rouge">expiring</code> application keys in real time.</li> </ul> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
