<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Use Token Data in HTTP Requests - Basis Theory Guides</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Use Token Data in HTTP Requests | Basis Theory Guides</title> <meta name="generator" content="Jekyll v4.2.2" /> <meta property="og:title" content="Use Token Data in HTTP Requests" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Explore step-by-step guides to use our APIs and SDKs." /> <meta property="og:description" content="Explore step-by-step guides to use our APIs and SDKs." /> <link rel="canonical" href="https://developers.basistheory.com/guides/use-token-data-in-http-requests/" /> <meta property="og:url" content="https://developers.basistheory.com/guides/use-token-data-in-http-requests/" /> <meta property="og:site_name" content="Basis Theory Guides" /> <meta property="og:image" content="https://cdn.basistheory.com/images/seo/guides-opengraph.png" /> <meta property="og:image:height" content="630" /> <meta property="og:image:width" content="1200" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary_large_image" /> <meta property="twitter:image" content="https://cdn.basistheory.com/images/seo/guides-opengraph.png" /> <meta property="twitter:title" content="Use Token Data in HTTP Requests" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Explore step-by-step guides to use our APIs and SDKs.","headline":"Use Token Data in HTTP Requests","image":{"width":1200,"height":630,"url":"https://cdn.basistheory.com/images/seo/guides-opengraph.png","@type":"imageObject"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://developers.basistheory.com/assets/images/logos-guides.svg"}},"url":"https://developers.basistheory.com/guides/use-token-data-in-http-requests/"}</script> <!-- End Jekyll SEO tag --> </head> <script defer data-api="https://analytics.basistheory.com/api/event" data-domain="developers.basistheory.com" src="https://cdn.basistheory.com/javascript/analytics.js"></script> <!-- Google Tag Manager --> <script>(function (w, d, s, l, i) { w[l] = w[l] || []; w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' }); var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f); })(window, document, 'script', 'dataLayer', 'GTM-M56229L');</script> <!-- End Google Tag Manager --> <!-- Iubenda --> <script type="text/javascript"> var _iub = _iub || []; _iub.csConfiguration = { "ccpaAcknowledgeOnLoad": true, "consentOnContinuedBrowsing": false, "countryDetection": true, "gdprAppliesGlobally": false, "lang": "en", "siteId": 2378844, "cookiePolicyId": 13137791, "callback": { "onPreferenceExpressedOrNotNeeded": function (preference) { dataLayer.push({ iubenda_ccpa_opted_out: _iub.cs.api.isCcpaOptedOut() }); if (!preference) { dataLayer.push({ event: "iubenda_preference_not_needed" }); } else { if (preference.consent === true) { dataLayer.push({ event: "iubenda_consent_given" }); } else if (preference.consent === false) { dataLayer.push({ event: "iubenda_consent_rejected" }); } else if (preference.purposes) { for (var purposeId in preference.purposes) { if (preference.purposes[purposeId]) { dataLayer.push({ event: "iubenda_consent_given_purpose_" + purposeId }); } } } } } }, "banner": { "acceptButtonCaptionColor": "#070a1b", "acceptButtonColor": "#1ad1db", "acceptButtonDisplay": true, "backgroundColor": "#141729", "closeButtonDisplay": false, "customizeButtonCaptionColor": "#d2d2d2", "customizeButtonColor": "#1a1e32", "customizeButtonDisplay": true, "position": "bottom", "rejectButtonCaptionColor": "white", "rejectButtonColor": "#1e2337", "rejectButtonDisplay": true, "textColor": "#e5e6ec", "acceptButtonCaption": "Accept All", "content": "<link rel=\"preconnect\" href=\"https://fonts.googleapis.com\" />\n<link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossOrigin=\"true\" />\n<link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap\" rel=\"stylesheet\" />\n<style>\ndiv#iubenda-cs-banner {\n font-size: 16px !important;\n font-family: 'Inter', sans-serif, -apple-system, sans-serif !important;\n}\n\ndiv#iubenda-cs-banner div.iubenda-cs-container {\n border-top: 1px solid #2f3244 !important;\n}\n\ndiv#iubenda-cs-banner .iubenda-banner-content {\n font-family: 'Inter', sans-serif, -apple-system, sans-serif !important;\n font-weight: 400 !important;\n color: #8389a6 !important;\n font-size: 14px !important; \n}\n\ndiv#iubenda-cs-title {\n color: #E5E6EC !important;\n font-size: 16px !important;\n}\n\ndiv#iubenda-cs-banner div.iubenda-cs-opt-group button {\n padding: 12px 32px !important;\n font-weight: 600 !important;\n border-radius: 4px !important;\n}\n\nbutton.iubenda-cs-accept-btn {\n box-shadow: 1px 1px 3px 0 rgb(49 255 255 / 30%), inset 0 0 0 1px hsl(0deg 0% 100% / 40%);\n margin-left: 16px !important;\n}\n\n@media (min-width: 992px) {\n #iubenda-cs-banner.iubenda-cs-default div.iubenda-cs-rationale {\n max-width: 1200px !important;\n width: 100% !important;\n }\n}\n</style><div id=\"iubenda-cs-title\">&#x1f36a; &nbsp;Cookie Notice</div><div id=\"iubenda-cs-paragraph\">\n\nBy clicking \"Accept All\", you agree to the storing of cookies on your device to enhance site navigation, analyze site usage, and assist in our marketing efforts. View our <a href=\"https://basistheory.com/privacy-policy\" target=\"_blank\">Cookie Policy</a> for more information.\n</div>", "rejectButtonCaption": "" } }; </script> <script type="text/javascript" src="//cdn.iubenda.com/cs/iubenda_cs.js" charset="UTF-8" async></script> <!-- End Iubenda --> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path> <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle> <line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line> <line x1="3" y1="6" x2="21" y2="6"></line> <line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path> <polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <header class="site-header"> <a class="site-header-logo" href="https://developers.basistheory.com/"> </a> <div class="documentation-links"> <a class="documentation-link " href="/getting-started">Get Started</a> <a class="documentation-link active" href="/">Documentation</a> <a class="documentation-link" href="https://docs.basistheory.com/api-reference/#introduction">API Reference</a> <a class="documentation-link" href="https://docs.basistheory.com/elements/#introduction">Elements</a> </div> <div class="portal-links"> <a class="portal-sign-in" href="https://portal.basistheory.com">Sign In</a> <a class="portal-create-account" href="https://portal.basistheory.com/register">Create Account</a> </div> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"> <use xlink:href="#svg-menu"></use> </svg> </a> </header> <div class="side-bar"> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <div class="nav-list"><a class="side-bar-category home-link" href="/"> <div class="icon-and-category-name"> <div class="home-icon category-icon-spacing "></div> <div class="side-bar-category-name home-link ">Home</div> </div> </a> <div class="side-bar-category" id="getting-started-category-name-and-icon"> <div class="icon-and-category-name"> <div class="getting-started-icon category-icon-spacing "></div> <div class="side-bar-category-name ">Getting Started</div> </div> <a class="category-expander" id="getting-started-category-expander"></a> </div> <div class="side-bar-category-items" id="getting-started-category-items"><div class="nav-list-item"> <a href="https://developers.basistheory.com/getting-started/quickstart-with-curl/" class="nav-list-link ">Quickstart with cURL</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/getting-started/quickstart-with-nodejs/" class="nav-list-link ">Quickstart with Node.js</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/getting-started/quickstart-with-python/" class="nav-list-link ">Quickstart with Python</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/getting-started/quickstart-with-ruby/" class="nav-list-link ">Quickstart with Ruby</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/getting-started/quickstart-with-dotnet/" class="nav-list-link ">Quickstart with .NET</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/getting-started/quickstart-with-java/" class="nav-list-link ">Quickstart with Java</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/getting-started/quickstart-with-go/" class="nav-list-link ">Quickstart with Go</a> </div></div> <div class="side-bar-category" id="blueprints-category-name-and-icon"> <div class="icon-and-category-name"> <div class="blueprints-icon category-icon-spacing "></div> <div class="side-bar-category-name ">Blueprints</div> </div> <a class="category-expander" id="blueprints-category-expander"></a> </div> <div class="side-bar-category-items" id="blueprints-category-items"><div class="nav-list-item"> <a href="https://developers.basistheory.com/blueprints/pci/" class="nav-list-link ">PCI Blueprint</a> </div></div> <div class="side-bar-category" id="concepts-category-name-and-icon"> <div class="icon-and-category-name"> <div class="concepts-icon category-icon-spacing "></div> <div class="side-bar-category-name ">Concepts</div> </div> <a class="category-expander" id="concepts-category-expander"></a> </div> <div class="side-bar-category-items" id="concepts-category-items"><div class="nav-list-item"> <a href="https://developers.basistheory.com/concepts/what-are-tokens/" class="nav-list-link ">Tokens</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/concepts/what-are-token-containers/" class="nav-list-link ">Token Containers</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/concepts/access-controls/" class="nav-list-link ">Access Controls</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/concepts/what-is-the-proxy/" class="nav-list-link ">Proxy</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/concepts/what-are-reactors/" class="nav-list-link ">Reactors</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/concepts/what-is-search/" class="nav-list-link ">Search</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/concepts/what-are-mats/" class="nav-list-link ">Monthly Active Tokens</a> </div></div> <div class="side-bar-category" id="guides-category-name-and-icon"> <div class="icon-and-category-name"> <div class="guides-icon category-icon-spacing active"></div> <div class="side-bar-category-name active">Guides</div> </div> <a class="category-expander" id="guides-category-expander"></a> </div> <div class="side-bar-category-items" id="guides-category-items"> <div class="guide-subcategory-title">SECURE YOUR DATA</div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/collect-pii-js/" class="nav-list-link ">Collect Customer Data (PII) with JavaScript</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/collect-pii-react/" class="nav-list-link ">Collect Customer Data (PII) with React</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/collect-cards-with-elements-react/" class="nav-list-link ">Collect Credit Cards with React</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/style-elements-for-my-brand/" class="nav-list-link ">Styling Elements</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/encrypt-us-banks-in-your-applications/" class="nav-list-link ">Encrypt U.S. Banks in your applications</a> </div><div class="guide-subcategory-title">USE YOUR DATA</div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/collect-cards-with-elements/" class="nav-list-link ">Collect and Charge Credit Cards with JavaScript</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/use-us-bank-accounts-without-touching-them/" class="nav-list-link ">Use U.S. Bank Accounts without touching them</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/reveal-cards-with-react/" class="nav-list-link ">Reveal Card Data with React</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/use-token-data-in-reactors/" class="nav-list-link ">Use Token Data in Reactors</a> </div><div class="nav-list-item active"> <a href="https://developers.basistheory.com/guides/use-token-data-in-http-requests/" class="nav-list-link active">Use Token Data in HTTP Requests</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/run-your-own-code-in-a-reactor/" class="nav-list-link ">Run Your Own Code in a Reactor</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/collect-cards-with-proxies/" class="nav-list-link ">Collect and Use Credit Cards with Proxies</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/migrating-off-basis-theory/" class="nav-list-link ">Migrating off Basis Theory</a> </div><div class="guide-subcategory-title">MANAGE YOUR DATA</div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/manage-applications-with-terraform/" class="nav-list-link ">Manage Applications with Terraform</a> </div><div class="nav-list-item"> <a href="https://developers.basistheory.com/guides/manage-reactor-formulas-with-terraform/" class="nav-list-link ">Manage Reactor Formulas with Terraform</a> </div></div> <div class="side-bar-category" id="reference-category-name-and-icon"> <div class="icon-and-category-name"> <div class="reference-icon category-icon-spacing"></div> <div class="side-bar-category-name">Reference</div> </div> <a class="category-expander" id="reference-category-expander"></a> </div> <div class="side-bar-category-items" id="reference-category-items"> <div class="nav-list-item"> <a href="https://docs.basistheory.com/api-reference/#introduction" class="nav-list-link">API Reference</a> <a href="https://status.basistheory.com" target="_blank" class="nav-list-link">System Status</a> <a href="https://docs.basistheory.com/elements/#introduction" class="nav-list-link">Elements</a> <a href="https://docs.basistheory.com/expressions/#introduction" class="nav-list-link">Expressions</a> </div> </div> <a class="side-bar-category" href="/labs"> <div class="icon-and-category-name"> <div class="labs-icon category-icon-spacing "></div> <div class="side-bar-category-name ">Basis Theory Labs</div> </div> </a> </div> </nav> <footer class="site-footer"> </footer> </div> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Basis Theory Guides" aria-label="Search Basis Theory Guides" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"> <use xlink:href="#svg-search"></use> </svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main" id="top"> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="use-token-data-in-http-requests">Use Token Data in HTTP Requests</h1> <p>In this guide, we will walk through how to use the Proxy to send an outbound HTTP request containing sensitive detokenized data.</p> <p>We will be leveraging the third party service https://httpbin.org/ as our external destination API. HTTPBin is a free service that will accept any input request and respond with information about the request it received. This will allow us to inspect the manipulated request that was forwarded from the Proxy to the destination API.</p> <p>If you would like to learn more about the Basis Theory Proxy first, or how this product can help you meet your security and compliance needs, check out <a href="/concepts/what-is-the-proxy">What is the Proxy?</a> before continuing.</p> <h3 class="no_toc text-delta" id="table-of-contents">Table of contents</h3> <ol id="markdown-toc"> <li><a href="#prerequisites" id="markdown-toc-prerequisites">Prerequisites</a> <ol> <li><a href="#application-setup" id="markdown-toc-application-setup">Application Setup</a></li> <li><a href="#create-a-token" id="markdown-toc-create-a-token">Create a Token</a></li> </ol> </li> <li><a href="#create-the-proxy-request" id="markdown-toc-create-the-proxy-request">Create the Proxy Request</a></li> <li><a href="#send-the-proxy-request-containing-detokenized-values" id="markdown-toc-send-the-proxy-request-containing-detokenized-values">Send the Proxy Request Containing Detokenized Values</a></li> </ol> <h2 id="prerequisites">Prerequisites</h2> <h3 id="application-setup">Application Setup</h3> <p>We will be creating and proxying tokens that contain PCI data in this example. First, we need to ensure we have a <code class="language-plaintext highlighter-rouge">Private</code> Application configured that has <code class="language-plaintext highlighter-rouge">token:create</code> and <code class="language-plaintext highlighter-rouge">token:use</code> permissions. We will be using the API Key associated with this application in all HTTP requests below. <a href="https://portal.basistheory.com/applications/create?application_template_id=6a67691b-14c2-41f9-96f6-bf3bfbe6fa31" target="_blank">Click here to create it.</a></p> <h3 id="create-a-token">Create a Token</h3> <p>Next, we will create a <code class="language-plaintext highlighter-rouge">card_number</code> token containing a credit card number we wish to secure with Basis Theory.</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">curl</span> <span class="dl">"</span><span class="s2">https://api.basistheory.com/tokens</span><span class="dl">"</span> <span class="o">\</span>
      <span class="o">-</span><span class="nx">H</span> <span class="dl">"</span><span class="s2">BT-API-KEY: key_NS21v84n7epsSc5WzoFjM6</span><span class="dl">"</span> <span class="o">\</span>
      <span class="o">-</span><span class="nx">H</span> <span class="dl">"</span><span class="s2">Content-Type: application/json</span><span class="dl">"</span> <span class="o">\</span>
      <span class="o">-</span><span class="nx">X</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span> <span class="o">\</span>
      <span class="o">-</span><span class="nx">d</span> <span class="dl">'</span><span class="s1">{
            "type": "card_number",
            "data": "6011111111111117"
        }</span><span class="dl">'</span>
</code></pre></div></div> <p>This responds with the created token:</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">a70f8701-8b65-476b-ac0a-21bcd7d943d5</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">card_number</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">XXXXXXXXXXXX1117</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">...</span>
<span class="p">}</span>
</code></pre></div></div> <p>We will be using the id of this token below to build a request to the Proxy.</p> <h2 id="create-the-proxy-request">Create the Proxy Request</h2> <p>In this example, we will be working with a hypothetical third party HTTP API that requires credit card information as input. This API will be available at <code class="language-plaintext highlighter-rouge">https://httpbin.org/anything</code> and it expects an HTTP POST request with a request body of the form:</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="dl">"</span><span class="s2">firstName</span><span class="dl">"</span><span class="p">:</span> <span class="o">&lt;</span><span class="nx">string</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">lastName</span><span class="dl">"</span><span class="p">:</span> <span class="o">&lt;</span><span class="nx">string</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">creditCardNumber</span><span class="dl">"</span><span class="p">:</span> <span class="o">&lt;</span><span class="nx">string</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">expirationDate</span><span class="dl">"</span><span class="p">:</span> <span class="o">&lt;</span><span class="nx">string</span><span class="o">&gt;</span>
<span class="p">}</span>
</code></pre></div></div> <p>Our hypothetical source system will be storing plaintext first names, last names, and expiration dates of card numbers, as these fields are considered non-sensitive. However, in order to minimize the compliance and security risk of our application, we do not want our application to store or even interact with raw credit card numbers when building this HTTP request.</p> <p>Instead, we will send a request to the Basis Theory Proxy which contains the non-sensitive data fields and the <code class="language-plaintext highlighter-rouge">id</code> of the <code class="language-plaintext highlighter-rouge">card_number</code> token we wish to include in the request.</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="dl">"</span><span class="s2">firstName</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">John</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">lastName</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Doe</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">creditCardNumber</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">{{a70f8701-8b65-476b-ac0a-21bcd7d943d5}}</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">expirationDate</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">10/2024</span><span class="dl">"</span>
<span class="p">}</span>
</code></pre></div></div> <p>The expression <code class="language-plaintext highlighter-rouge">{{a70f8701-8b65-476b-ac0a-21bcd7d943d5}}</code> within the request will be identified by the Proxy, and the raw credit card number represented by this token will be substituted in its place.</p> <h2 id="send-the-proxy-request-containing-detokenized-values">Send the Proxy Request Containing Detokenized Values</h2> <p>In order to send this request payload into the Basis Theory Proxy a few additional pieces of information are required as HTTP headers:</p> <ul> <li>BT-API-KEY: the API key of the Basis Theory application we created earlier</li> <li>BT-PROXY-URL: the destination url to which the request should be forwarded (<code class="language-plaintext highlighter-rouge">https://httpbin.org/anything</code>)</li> <li>BT-PROXY-KEY: the <code class="language-plaintext highlighter-rouge">key</code> of the pre-configured <a href="https://docs.basistheory.com/#proxies-proxy-object">proxy</a> to use for this request</li> </ul> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">curl</span> <span class="dl">"</span><span class="s2">https://api.basistheory.com/proxy</span><span class="dl">"</span> <span class="o">\</span>
      <span class="o">-</span><span class="nx">H</span> <span class="dl">"</span><span class="s2">BT-API-KEY: key_NS21v84n7epsSc5WzoFjM6</span><span class="dl">"</span> <span class="o">\</span>
      <span class="o">-</span><span class="nx">H</span> <span class="dl">"</span><span class="s2">BT-PROXY-URL: https://httpbin.org/anything</span><span class="dl">"</span> <span class="o">\</span>
      <span class="o">-</span><span class="nx">H</span> <span class="dl">"</span><span class="s2">Content-Type: application/json</span><span class="dl">"</span> <span class="o">\</span>
      <span class="o">-</span><span class="nx">X</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span> <span class="o">\</span>
      <span class="o">-</span><span class="nx">d</span> <span class="dl">'</span><span class="s1">{
            "firstName": "John",
            "lastName": "Doe",
            "creditCardNumber": "{{a70f8701-8b65-476b-ac0a-21bcd7d943d5}}",
            "expirationDate": "10/2024"
        }</span><span class="dl">'</span>
</code></pre></div></div> <p>This sends the request through the Proxy, which transforms the request before forwarding it onto the destination service at HTTPBin. HTTPBin returns the following response describing the request that it received, and this response is forwarded back through the proxy (some information is redacted for brevity):</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">{ </span><span class="se">\"</span><span class="s2">firstName</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">John</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">lastName</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">Doe</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">creditCardNumber</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">6011111111111117</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">expirationDate</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">10/2024</span><span class="se">\"</span><span class="s2"> }</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="p">...</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Host</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">httpbin.org</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-Forwarded-Host</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.basistheory.com</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-Forwarded-Tlsversion</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1.2</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">...</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">creditCardNumber</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">6011111111111117</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">expirationDate</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">10/2024</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">firstName</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">John</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">lastName</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Doe</span><span class="dl">"</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
  <span class="p">...</span>
<span class="p">}</span>
</code></pre></div></div> <p>As we can see from this response, the request received by the destination service included the original raw credit card number that had been tokenized with Basis Theory. The other non-sensitive data fields that were provided in plaintext were forwarded in the request without modification.</p> <p>This was just a basic example of what you can accomplish using the Proxy. If you’re interested in some of the more advanced proxying features, check out our docs on the <a href="https://docs.basistheory.com/#proxy">Proxy</a> or <a href="https://docs.basistheory.com/expressions/#detokenization">Detokenization</a> to learn more!</p> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
